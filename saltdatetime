// utils/dateConversion.ts

// ISO = "YYYY-MM-DD"
export type ISODate = string;

const pad2 = (n: number) => String(n).padStart(2, "0");
const toISO = (y: number, m1: number, d: number): ISODate =>
  `${y}-${pad2(m1)}-${pad2(d)}`;

/**
 * Turn an ISO date string into a JS Date at *local* midnight.
 * This ensures Salt DS DatePicker (date-fns adapter) shows the correct calendar day
 * in any timezone.
 */
export const dateForPickerFromISO = (iso: ISODate): Date => {
  const [y, m, d] = iso.split("-").map(Number);
  return new Date(y, m - 1, d); // local midnight
};

/**
 * Turn a JS Date from the DatePicker back into an ISO string (YYYY-MM-DD).
 * Reads local parts so the day matches what the user saw/selected.
 */
export const isoFromPickerDate = (date: Date): ISODate => {
  return toISO(date.getFullYear(), date.getMonth() + 1, date.getDate());
};
